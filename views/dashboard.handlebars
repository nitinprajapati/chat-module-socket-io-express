<div class="row">
    <div class="col-md-0"></div>
    <div class="col-md-12 pull-right">Welcome, {{user.Username}}</div>
</div>
<div class="" id="onlineUsers">
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
<script>
     var socket = io();
     socket.on("loginusers", (data) => {
         console.log("User loggedin: "+JSON.stringify(data));
     });
     function setUsername(){
         socket.emit("setUsername", $('#name').val());
     }
   </script>
   <div id = "error-container"></div>
      <input id = "name" type = "text" name = "name" value = "" 
         placeholder = "Enter your name!">
      <button type = "button" name = "button" onclick = "setUsername()">
         Let me chat!
      </button>
<script>
  $( () => {
    var onlineUsers = () => {
      $.ajax({
        url: "/loggedinUsers",
        type: "POST",
        async: false,
        data: JSON.stringify({}),
        dataType: "json",
        contentType: "application/json",
        statusCode: {
            404: () => {
                alert("page not found");
            }
        },
        success: (msg) => {
            if(msg.Status){
                var str = "";
                for(let i=0; i<msg.Result.length; i++){
                    str += '<div class="row"><div class="col-md-2 pull-right">'+msg.Result[i].Username+'</div></div>';
                }
                $("#onlineUsers").html(str);
            }
        }
      });
    };
    onlineUsers();
});
</script>